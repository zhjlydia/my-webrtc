import{r as s,j as v,a}from"./index-699ff13b.js";import{g}from"./media-4b3d1922.js";const S=()=>{const t=s.useRef({}),o=s.useRef({}),[r,i]=s.useState(!1),[l,d]=s.useState(!1),u=async()=>{const e=await g({audio:!1,video:{width:1280,height:720}});t.current.srcObject=e,i(!0)},h=()=>{const e=t.current.srcObject;(e==null?void 0:e.getTracks()).forEach(function(n){n.stop()}),t.current.srcObject=null,i(!1)},m=()=>{r?h():u()},f=()=>{var n;l||d(!0);const e=o.current,c=t.current;e.width=c.videoWidth,e.height=c.videoHeight,(n=e.getContext("2d"))==null||n.drawImage(c,0,0,e.width,e.height)};return s.useEffect(()=>()=>{console.log("unmount")},[]),v("div",{className:"page-get-user-media",children:[a("div",{className:"btn mar-b-20",onClick:m,children:r?"Close camera":"Open camera"}),a("div",{className:"btn mar-b-20 mar-l-10",onClick:f,children:"Take snapshot"}),a("div",{className:"video-container mar-b-10",children:a("video",{autoPlay:!0,playsInline:!0,muted:!0,ref:t})}),a("canvas",{className:"canvas",style:{visibility:l?"visible":"hidden"},ref:o})]})};export{S as default};
